# Kustomization for advanced test with different parallelism levels
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Base configuration
resources:
  - ../../namespace.yaml
  - ../../scripts-configmap.yaml
  - ../../testrun-advanced.yaml

# Patches to modify parallelism
patches:
  # Override parallelism for advanced test
  - target:
      kind: TestRun
      name: k6-advanced-test
    patch: |-
      - op: replace
        path: /spec/parallelism
        value: 5

# Common labels for this overlay
commonLabels:
  app.kubernetes.io/name: k6
  app.kubernetes.io/component: advanced-test
  test.parallelism: "5"

# Namespace
namespace: k6-tests
